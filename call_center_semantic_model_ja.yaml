name: call_center_analytics_model_ja
description: Semantic model for call center analytics with AI transcription data, enabling natural language queries about call performance, agent effectiveness, and customer satisfaction
tables:
  - name: comprehensive_call_analysis_ja
    description: Main table containing transcribed call data with AI-extracted insights including sentiment analysis, agent performance metrics, and customer satisfaction scores
    base_table:
      database: CALL_CENTER_ANALYTICS_DB
      schema: ANALYTICS
      table: COMPREHENSIVE_CALL_ANALYSIS_JA

    dimensions:
      - name: call_id
        data_type: TEXT
        description: Unique identifier for each call
        expr: CALL_ID
        synonyms: [call identifier, call number, call reference]

      - name: agent_name
        data_type: TEXT
        description: Name of the customer service agent handling the call
        expr: AGENT_NAME
        synonyms: [agent, representative, rep, customer service agent, support agent]

      - name: customer_name
        data_type: TEXT
        description: Name of the customer making the call
        expr: CUSTOMER_NAME
        synonyms: [customer, caller, client]

      - name: call_type
        data_type: TEXT
        description: Inbound / outbound / transfer classification
        expr: CALL_TYPE
        synonyms: [type, direction]

      - name: primary_intent
        data_type: TEXT
        description: Primary reason for the call (billing, technical_support, complaint, information, sales, cancellation, other)
        expr: PRIMARY_INTENT
        synonyms: [call reason, intent, purpose, issue type]
        sample_values: [billing, technical_support, complaint, information, sales, cancellation, other]

      - name: urgency_level
        data_type: TEXT
        description: Urgency level of the call
        expr: URGENCY_LEVEL
        synonyms: [priority, urgency]

      - name: issue_resolved
        data_type: TEXT
        description: Whether the customer issue was resolved during the call
        expr: ISSUE_RESOLVED
        synonyms: [resolved, resolution status, issue status]
        sample_values: [yes, no, partial]

      - name: escalation_required
        data_type: TEXT
        description: Whether the call required escalation to higher level support
        expr: ESCALATION_REQUIRED
        synonyms: [escalated, escalation, escalation status]
        sample_values: [yes, no]

      - name: customer_satisfaction
        data_type: TEXT
        description: Customer satisfaction level determined from call analysis
        expr: CUSTOMER_SATISFACTION
        synonyms: [satisfaction, csat, customer satisfaction level]
        sample_values: [satisfied, neutral, dissatisfied]

      - name: overall_sentiment
        data_type: TEXT
        description: Overall sentiment classification of the conversation
        expr: OVERALL_SENTIMENT
        synonyms: [sentiment, mood, emotional tone]
        sample_values: [positive, negative, neutral]

      - name: company_sentiment
        data_type: TEXT
        description: Sentiment toward the company
        expr: COMPANY_SENTIMENT

      - name: product_sentiment
        data_type: TEXT
        description: Sentiment toward the product
        expr: PRODUCT_SENTIMENT

      - name: support_agent_sentiment
        data_type: TEXT
        description: Sentiment toward the support agent
        expr: SUPPORT_AGENT_SENTIMENT

    time_dimensions:
      - name: analysis_timestamp
        data_type: TIMESTAMP_LTZ
        description: Timestamp when the call analysis was completed
        expr: ANALYSIS_TIMESTAMP
        synonyms: [call date, call time, analysis date]

    facts:
      - name: sentiment_score
        data_type: NUMBER
        description: Numerical sentiment score for the call on a 1–10 scale
        expr: SENTIMENT_SCORE
        synonyms: [sentiment rating, emotional score]

      - name: agent_performance_score
        data_type: NUMBER
        description: Performance score for the agent on a 1–10 scale
        expr: AGENT_PERFORMANCE_SCORE
        synonyms: [agent score, performance rating, agent rating]

    metrics:
      - name: total_calls
        description: Total number of calls
        expr: COUNT(*)
        synonyms: [call count, number of calls, call volume]

      - name: avg_sentiment_score
        description: Average sentiment score across calls
        expr: AVG(SENTIMENT_SCORE)
        synonyms: [average sentiment, mean sentiment, sentiment average]

      - name: avg_agent_performance
        description: Average agent performance score
        expr: AVG(AGENT_PERFORMANCE_SCORE)
        synonyms: [average agent score, mean agent performance, agent performance average]

      - name: resolution_rate
        description: Percentage of calls with issues resolved successfully
        expr: "100 * SUM(CASE WHEN ISSUE_RESOLVED = 'yes' THEN 1 ELSE 0 END) / NULLIF(COUNT(*),0)"
        synonyms: [resolution percentage, success rate, issue resolution rate]

      - name: satisfaction_rate
        description: Percentage of customers who were satisfied with the call
        expr: "100 * SUM(CASE WHEN CUSTOMER_SATISFACTION = 'satisfied' THEN 1 ELSE 0 END) / NULLIF(COUNT(*),0)"
        synonyms: [satisfaction percentage, customer satisfaction rate, csat rate]

      - name: escalation_rate
        description: Percentage of calls that required escalation
        expr: "100 * SUM(CASE WHEN ESCALATION_REQUIRED = 'yes' THEN 1 ELSE 0 END) / NULLIF(COUNT(*),0)"
        synonyms: [escalation percentage, escalation ratio]

      - name: positive_sentiment_rate
        description: Percentage of calls with positive overall sentiment
        expr: "100 * SUM(CASE WHEN LOWER(OVERALL_SENTIMENT) = 'positive' THEN 1 ELSE 0 END) / NULLIF(COUNT(*),0)"
        synonyms: [positive sentiment percentage, positive call rate]

    filters:
      - name: recent_calls
        description: Filter for calls from the last 30 days
        expr: ANALYSIS_TIMESTAMP >= DATEADD(day, -30, CURRENT_TIMESTAMP())
        synonyms: [recent, last 30 days, past month]

      - name: resolved_calls
        description: Filter for calls where issues were resolved
        expr: ISSUE_RESOLVED = 'yes'
        synonyms: [successful calls, resolved issues]

      - name: escalated_calls
        description: Filter for calls that required escalation
        expr: ESCALATION_REQUIRED = 'yes'
        synonyms: [escalated, escalation required]

verified_queries:
  - name: agent_performance_summary
    question: What is the average performance score by agent?
    sql: |
      SELECT AGENT_NAME, AVG(AGENT_PERFORMANCE_SCORE) AS AVG_PERFORMANCE
      FROM CALL_CENTER_ANALYTICS_DB.ANALYTICS.COMPREHENSIVE_CALL_ANALYSIS_JA
      GROUP BY AGENT_NAME
      ORDER BY AVG_PERFORMANCE DESC

  - name: resolution_rate_by_intent
    question: What is the resolution rate by call intent?
    sql: |
      SELECT PRIMARY_INTENT,
             100 * SUM(CASE WHEN ISSUE_RESOLVED = 'yes' THEN 1 ELSE 0 END) / NULLIF(COUNT(*),0) AS RESOLUTION_RATE
      FROM CALL_CENTER_ANALYTICS_DB.ANALYTICS.COMPREHENSIVE_CALL_ANALYSIS_JA
      GROUP BY PRIMARY_INTENT
      ORDER BY RESOLUTION_RATE DESC

  - name: daily_call_volume
    question: How many calls do we get per day?
    sql: |
      SELECT DATE(ANALYSIS_TIMESTAMP) AS CALL_DATE,
             COUNT(*) AS DAILY_CALLS
      FROM CALL_CENTER_ANALYTICS_DB.ANALYTICS.COMPREHENSIVE_CALL_ANALYSIS_JA
      GROUP BY DATE(ANALYSIS_TIMESTAMP)
      ORDER BY CALL_DATE DESC